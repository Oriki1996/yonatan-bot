<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>יונתן הפסיכו-בוט | כלים להורות מודעת</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🧠%3C/text%3E%3C/svg%3E">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { 
            --primary: #4f46e5; 
            --font-size: 1rem;
        }
        html { scroll-behavior: smooth; scroll-padding-top: 5rem; }
        body { font-family: 'Assistant', sans-serif; background-color: #f8fafc; color: #1f2937; overflow-x: hidden; font-size: var(--font-size); }
        .modal-overlay { display: none; position: fixed; inset: 0; background-color: rgba(17, 24, 39, 0.8); -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); z-index: 100; align-items: center; justify-content: center; animation: fadeIn 0.3s ease; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: white; border-radius: 1.5rem; padding: 2.5rem; max-width: 550px; width: 90%; text-align: center; animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        #page-wrapper { transition: filter 0.3s ease-in-out; }
        #page-wrapper.blurred { filter: blur(5px); pointer-events: none; }
        .hero-section { background: linear-gradient(135deg, #eef2ff 0%, #dbeafe 100%); }
        .feature-card { transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); border: 1px solid #e5e7eb; display: flex; flex-direction: column; }
        .feature-card:hover { transform: translateY(-8px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); border-color: var(--primary); }
        .feature-icon { transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .feature-card:hover .feature-icon { transform: scale(1.15) rotate(5deg); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(-30px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
        .reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .accessibility-toggle { position: fixed; bottom: 20px; left: 20px; background: white; border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); cursor: pointer; z-index: 101; transition: all 0.3s ease; }
        .accessibility-toggle:hover { transform: scale(1.1); }
        .accessibility-menu { position: fixed; bottom: 80px; left: 20px; background: white; border-radius: 12px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); z-index: 101; transform: translateY(20px) scale(0.95); opacity: 0; pointer-events: none; transition: all 0.3s ease; width: 220px; }
        .accessibility-menu.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: all; }
        .accessibility-menu button { width: 100%; text-align: right; padding: 8px; border-radius: 6px; }
        .accessibility-menu button:hover { background-color: #f3f4f6; }
        body.reduced-motion * { animation: none !important; transition: none !important; }
        body.accessibility-contrast { --primary: #60a5fa; background-color: #000 !important; color: #fff !important; }
        body.accessibility-contrast .hero-section, body.accessibility-contrast .feature-card, body.accessibility-contrast .article-card, body.accessibility-contrast .modal-content, body.accessibility-contrast .accessibility-menu, body.accessibility-contrast header, body.accessibility-contrast footer { background: #111 !important; color: #fff !important; border-color: #fff !important; }
        body.accessibility-contrast p, body.accessibility-contrast span, body.accessibility-contrast label, body.accessibility-contrast h1, body.accessibility-contrast h2, body.accessibility-contrast h3 { color: #fff !important; }
        body.accessibility-contrast a, body.accessibility-contrast button { color: #93c5fd !important; }
        body.accessibility-highlight-links a { text-decoration: underline !important; background-color: yellow; color: black !important; padding: 2px; }
    </style>
</head>
<body class="antialiased">

    <!-- *** FIXED: Re-added the missing modal containers *** -->
    <div id="disclaimer-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-center mb-6"><div class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center"><span class="text-5xl">🧠</span></div></div>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ברוכים הבאים ליונתן הפסיכו-בוט</h2>
            <p class="text-gray-600 mb-6"><strong>כתב ויתור חשוב:</strong> יונתן אינו מחליף ייעוץ פסיכולוגי מקצועי ואינו מתיימר להיות כזה. הוא מהווה כלי עזר בלבד, שמטרתו לספק מידע, כלים ומודעות בנושאי הורות והתפתחות ילדים.</p>
            <div id="agree-container" class="flex items-center justify-center space-x-4 space-x-reverse mb-6 p-3 rounded-lg">
                <input type="checkbox" id="agree-checkbox" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                <label for="agree-checkbox" class="text-gray-700 cursor-pointer">קראתי, הבנתי ואני מאשר/ת את התנאים.</label>
            </div>
            <button id="agree-button" class="w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>כניסה לאתר</button>
        </div>
    </div>
    <div id="tutorial-modal" class="modal-overlay"><div id="tutorial-content" class="modal-content relative"></div></div>
    <div id="article-modal" class="modal-overlay p-4"><div id="article-content-wrapper" class="modal-content !max-w-3xl text-right max-h-[90vh] overflow-y-auto"></div></div>

    <div id="page-wrapper">
        <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40">
            <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                 <div class="flex items-center gap-3"><span class="text-3xl">🧠</span><span class="text-xl font-bold text-gray-800">יונתן הפסיכו-בוט</span></div>
                <nav class="hidden md:flex items-center gap-8">
                    <a href="#features" class="text-gray-600 hover:text-primary font-semibold">תכונות</a>
                    <a href="#articles" class="text-gray-600 hover:text-primary font-semibold">מאמרים</a>
                    <a href="/dashboard.html" class="text-gray-600 hover:text-primary font-semibold">אזור אישי</a>
                    <button id="show-tutorial-btn" class="text-sm text-indigo-600 hover:underline">הצג הדרכה</button>
                </nav>
            </div>
        </header>

        <main>
            <section class="hero-section py-20">
                <div class="container mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
                    <div class="text-center lg:text-right">
                        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 leading-tight">המסע להורות רגועה מתחיל כאן</h1>
                        <p class="text-lg text-gray-700 max-w-xl mx-auto lg:mx-0 mb-8">יונתן הוא העוזר האישי שלכם, המשלב עקרונות מפסיכולוגיה וכלים מעשיים כדי לעזור לכם להבין את עולמם הרגשי של ילדיכם, להתמודד עם אתגרים, וליצור תקשורת משפחתית חיובית.</p>
                        <button onclick="document.getElementById('yonatan-chat-button')?.click()" class="bg-indigo-600 text-white font-bold py-4 px-10 rounded-lg text-lg hover:bg-indigo-700 transition-transform transform hover:scale-105 shadow-lg">התחל שיחה עם יונתן</button>
                    </div>
                    <div class="slider">
                        <div class="slide active"><img src="https://images.pexels.com/photos/769525/pexels-photo-769525.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="הורה וילד משחקים בכדור"></div>
                        <div class="slide"><img src="https://images.pexels.com/photos/1121796/pexels-photo-1121796.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="ילד מחייך עם פרח"></div>
                        <div class="slide"><img src="https://images.pexels.com/photos/8916931/pexels-photo-8916931.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="ילד משחק בלגו"></div>
                        <div class="slide"><img src="https://images.pexels.com/photos/3770308/pexels-photo-3770308.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="אינטראקציה משפחתית חיובית"></div>
                    </div>
                </div>
            </section>

            <section id="features" class="py-24 bg-white">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-4 reveal">ארגז כלים להורות מודעת</h2>
                    <p class="text-lg text-center text-gray-600 mb-16 max-w-2xl mx-auto reveal">גלו כלים מעשיים המבוססים על גישות פסיכולוגיות מוכחות כדי לתמוך בכם ובילדיכם.</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-8">
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-red-100 text-red-600 mx-auto mb-4 text-4xl feature-icon">❤️</div><h3 class="text-xl font-bold mb-2">התפתחות רגשית</h3><p class="text-gray-600 mt-auto">כלים לזיהוי, הכלה וויסות רגשות אצל ילדים.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-blue-100 text-blue-600 mx-auto mb-4 text-4xl feature-icon">🧩</div><h3 class="text-xl font-bold mb-2">התנהגויות מאתגרות</h3><p class="text-gray-600 mt-auto">אסטרטגיות להתמודדות עם התקפי זעם וקשיים.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-green-100 text-green-600 mx-auto mb-4 text-4xl feature-icon">🗣️</div><h3 class="text-xl font-bold mb-2">תקשורת הורה-ילד</h3><p class="text-gray-600 mt-auto">למדו כיצד לנהל שיחות פתוחות וליצור הקשבה.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-yellow-100 text-yellow-600 mx-auto mb-4 text-4xl feature-icon">🌱</div><h3 class="text-xl font-bold mb-2">חינוך חיובי</h3><p class="text-gray-600 mt-auto">שיטות לחיזוק התנהגויות רצויות ובניית סביבה תומכת.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-purple-100 text-purple-600 mx-auto mb-4 text-4xl feature-icon">🌟</div><h3 class="text-xl font-bold mb-2">פיתוח עצמאות</h3><p class="text-gray-600 mt-auto">עודדו את ילדיכם לקחת אחריות ולפתח ביטחון עצמי.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-teal-100 text-teal-600 mx-auto mb-4 text-4xl feature-icon">😴</div><h3 class="text-xl font-bold mb-2">שינה רגועה</h3><p class="text-gray-600 mt-auto">כלים ליצירת הרגלי שינה בריאים והתמודדות עם קשיי הירדמות.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-pink-100 text-pink-600 mx-auto mb-4 text-4xl feature-icon">👨‍👩‍👧‍👦</div><h3 class="text-xl font-bold mb-2">יחסי אחים</h3><p class="text-gray-600 mt-auto">אסטרטגיות להפחתת מריבות וטיפוח קשר חיובי בין אחים.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-orange-100 text-orange-600 mx-auto mb-4 text-4xl feature-icon">📱</div><h3 class="text-xl font-bold mb-2">ניהול מסכים</h3><p class="text-gray-600 mt-auto">קביעת גבולות בריאים ואיזון נכון בין העולם הדיגיטלי למציאות.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-cyan-100 text-cyan-600 mx-auto mb-4 text-4xl feature-icon">😟</div><h3 class="text-xl font-bold mb-2">התמודדות עם חרדה</h3><p class="text-gray-600 mt-auto">זיהוי סימני חרדה אצל ילדים ומתן כלים להרגעה וביטחון.</p></div>
                        <div class="feature-card text-center p-6 rounded-2xl reveal"><div class="flex items-center justify-center h-20 w-20 rounded-full bg-lime-100 text-lime-600 mx-auto mb-4 text-4xl feature-icon">🤝</div><h3 class="text-xl font-bold mb-2">כישורים חברתיים</h3><p class="text-gray-600 mt-auto">עידוד אמפתיה, שיתוף פעולה ויצירת חברויות בריאות.</p></div>
                    </div>
                </div>
            </section>
            
            <section id="articles" class="py-24 bg-gray-50">
                <div class="container mx-auto px-6">
                     <h2 class="text-3xl font-bold text-center mb-4 reveal">מגובה במדע: מאמרים וכלים</h2>
                     <p class="text-lg text-center text-gray-600 mb-16 max-w-2xl mx-auto reveal">ידע מקצועי וטיפים מעשיים הכתובים בשפה ברורה, נגישה ולא שיפוטית, המבוססים על גישות פסיכולוגיות מוכחות.</p>
                     <div id="articles-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                     <div id="show-all-articles-container" class="text-center mt-12">
                        <button id="show-all-articles-btn" class="bg-white text-indigo-600 font-semibold py-3 px-8 border-2 border-indigo-200 rounded-lg hover:bg-indigo-50 transition">הצג את כל המאמרים</button>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="bg-gray-800 text-white">
            <div class="container mx-auto px-6 py-8 text-center">
                <p>&copy; 2025 יונתן הפסיכו-בוט. כל הזכויות שמורות.</p>
                <p class="text-sm text-gray-400 mt-2">האתר מהווה כלי עזר בלבד ואינו תחליף לייעוץ פסיכולוגי מקצועי.</p>
                <a href="/accessibility.html" class="text-sm text-gray-400 hover:text-white underline mt-4 inline-block">הצהרת נגישות</a>
            </div>
        </footer>
    </div>
    
    <div id="walking-character-container">
        <div id="character-animation"></div>
    </div>

    <div class="accessibility-toggle" id="accessibility-toggle" aria-label="פתח תפריט נגישות" role="button" tabindex="0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128ZM128,72a16,16,0,1,0-16-16A16,16,0,0,0,128,72Zm-8,32v64a8,8,0,0,0,16,0V104a8,8,0,0,0-16,0Z"></path></svg>
    </div>
    <div class="accessibility-menu" id="accessibility-menu">
        <div class="text-lg font-bold mb-3 text-right">הגדרות נגישות</div>
        <div class="space-y-2">
            <button id="increase-font">הגדל גופן</button>
            <button id="decrease-font">הקטן גופן</button>
            <button id="toggle-contrast">ניגודיות גבוהה</button>
            <button id="toggle-links">הדגש קישורים</button>
            <button id="toggle-motion">הפחת תנועה</button>
        </div>
    </div>

    <script src="/widget.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const articlesData = {
            'anger-management': { 
                title: 'הבנת התקפי זעם', 
                image: 'https://images.pexels.com/photos/1254736/pexels-photo-1254736.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'התקפי זעם הם חלק טבעי מההתפתחות, אך הבנת המקור שלהם והגדרת תגובה נכונה יכולים לשנות את הדינמיקה המשפחתית. מאמר זה מספק כלים מעשיים לזהות את הטריגרים, ללמד את הילד לווסת את רגשותיו העזים, ולהחזיר את הרוגע הביתה.',
                content: '<h4>הכלי הטיפולי: שיקוף רגשי וויסות</h4><p>התקפי זעם נובעים לרוב מתסכול וחוסר יכולת לבטא צרכים. במקום לכעוס חזרה, נסו לשקף את רגש הילד: "אני רואה שאתה כועס מאוד כי רצית להמשיך לשחק". זה נותן לו תחושה שמבינים אותו. התגובה הרגועה שלכם היא העוגן שלו בסערה. חשוב לזכור שהמטרה אינה לדכא את הכעס, אלא ללמד דרכים בריאות לבטא אותו.</p>', 
                source: 'https://www.apa.org/topics/parenting/managing-child-anger',
                source_type: 'פרסום של האגודה האמריקנית לפסיכולוגיה (APA)'
            },
            'active-listening': { 
                title: 'אומנות ההקשבה הפעילה', 
                image: 'https://images.pexels.com/photos/4100667/pexels-photo-4100667.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'תקשורת היא הבסיס לכל מערכת יחסים בריאה. הקשבה פעילה היא יותר משמיעת המילים; היא הבנת הרגש שמאחוריהן. למדו כיצד להניח את הסחות הדעת בצד, לתת תוקף לרגשות ילדכם, ולבנות גשר של אמון שישרת אתכם לשנים הבאות.',
                content: '<h4>הכלי הטיפולי: מתן תוקף לרגשות</h4><p>כאשר ילד משתף בקושי, התגובה הראשונה שלנו היא לעיתים לנסות "לתקן" או לבטל את הרגש. הקשבה פעילה דורשת מאיתנו לעצור ולהגיד: "זה נשמע ממש מתסכל / מעליב / מפחיד". מתן תוקף לרגש אינו הסכמה עם ההתנהגות, אלא הכרה בחוויה של הילד. זה מאפשר לו להרגיש בטוח מספיק כדי לשתף עוד.</p>', 
                source: 'https://www.canr.msu.edu/news/an_introduction_to_active_listening',
                source_type: 'מאמר מאוניברסיטת מישיגן (MSU)'
            },
            'play-development': { 
                title: 'משחק ככלי להתפתחות', 
                image: 'https://images.pexels.com/photos/4473870/pexels-photo-4473870.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'משחק הוא "העבודה" של הילדים והדרך המרכזית שלהם ללמוד על העולם. מאמר זה מסביר מדוע זמן משחק חופשי ולא מובנה חיוני לפיתוח יצירתיות, דמיון, כישורי פתרון בעיות, ויכולות חברתיות. גלו כיצד לעודד משחק משמעותי.',
                content: '<h4>הכלי הטיפולי: משחק חופשי בהובלת הילד</h4><p>תפקיד ההורה במשחק הוא לא לנהל, אלא לאפשר. ספקו סביבה בטוחה וחומרים פשוטים, ושבו בצד. תנו לילד להוביל, להמציא חוקים ולפתור בעיות בעצמו. התערבו רק אם הוא מבקש או אם יש סכנה. זה בונה ביטחון עצמי ועצמאות. משחק כזה מאפשר לילד לחקור את העולם בתנאים שלו, מה שמחזק את תחושת המסוגלות שלו.</p>', 
                source: 'https://www.healthychildren.org/English/ages-stages/toddler/fitness/Pages/Why-it-is-Important-to-Play.aspx',
                source_type: 'פרסום של האקדמיה האמריקאית לרפואת ילדים (AAP)'
            },
            'positive-discipline': { 
                title: 'עקרונות החינוך החיובי', 
                image: 'https://images.pexels.com/photos/5905709/pexels-photo-5905709.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'חינוך חיובי מתמקד בבניית מערכת יחסים של כבוד הדדי, תוך הצבת גבולות ברורים ואוהבים. במקום עונשים, הגישה דוגלת בהבנת הסיבה להתנהגות ובהוראת כישורים חברתיים ורגשיים.',
                content: '<h4>הכלי הטיפולי: התמקדות בפתרונות, לא בבעיות</h4><p>במקום לשאול "למה עשית את זה?", נסו לשאול "איזו בעיה ניסית לפתור?". לדוגמה, אם ילד חטף צעצוע, הבעיה שהוא ניסה לפתור היא "אני רוצה לשחק בזה עכשיו". המטרה היא למצוא יחד פתרון שמכבד את כולם, כמו "בוא נשים טיימר של 5 דקות ואז יהיה תורך". גישה זו מלמדת פתרון בעיות במקום להנחית עונש.</p>', 
                source: 'https://www.apa.org/act/resources/fact-sheets/parenting-styles',
                source_type: 'סקירת סגנונות הורות של ה-APA'
            },
            'building-independence': { 
                title: 'טיפוח עצמאות וביטחון עצמי', 
                image: 'https://images.pexels.com/photos/4145354/pexels-photo-4145354.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'ילדים זקוקים להזדמנויות כדי להאמין בעצמם. פיתוח עצמאות הוא תהליך הדרגתי של מתן אחריות מותאמת גיל, המאפשר לילד לחוות הצלחות וללמוד מטעויות בסביבה בטוחה.',
                content: '<h4>הכלי הטיפולי: "שאל, אל תגיד"</h4><p>במקום לתת הוראות, נסו לשאול שאלות שמעודדות חשיבה עצמאית. במקום "שים את המעיל שלך", שאלו "מה אנחנו צריכים לקחת לפני שיוצאים החוצה?". במקום "תסדר את החדר", שאלו "איפה המקום של הצעצועים האלה?". גישה זו מעבירה את האחריות לילד ומחזקת את תחושת המסוגלות שלו.</p>', 
                source: 'https://childmind.org/article/how-to-build-self-esteem-in-kids/',
                source_type: 'מאמר מ-Child Mind Institute'
            },
            'anxiety-in-children': { 
                title: 'זיהוי והתמודדות עם חרדה', 
                image: 'https://images.pexels.com/photos/4098154/pexels-photo-4098154.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'חרדה היא רגש טבעי, אך לעיתים היא עלולה להפוך למגבילה. למדו לזהות את הסימנים של חרדה אצל ילדים, אשר יכולים להיות פיזיים, רגשיים והתנהגותיים. המאמר מציע כלים מבוססי CBT להרגעה.',
                content: '<h4>הכלי הטיפולי: "סולם הפחד"</h4><p>כדי להתמודד עם פחד ספציפי (למשל, פחד מכלבים), בונים יחד עם הילד "סולם" של צעדים קטנים. השלב הראשון יכול להיות "לראות תמונה של כלב", השני "לראות סרטון של כלב", השלישי "לראות כלב אמיתי מרחוק", וכן הלאה, עד לשלב הסופי של ליטוף כלב ידידותי. כל שלב מתורגל עד שהחרדה פוחתת. זהו עיקרון של חשיפה הדרגתית.</p>', 
                source: 'https://www.cdc.gov/childrensmentalhealth/depression.html',
                source_type: 'פרסום של המרכז לבקרת מחלות (CDC)'
            },
            'sibling-rivalry': { 
                title: 'מריבות בין אחים', 
                image: 'https://images.pexels.com/photos/561463/pexels-photo-561463.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'קונפליקטים בין אחים הם חלק בלתי נמנע מהחיים, אך הם גם הזדמנות מצוינת ללמד כישורי חיים חשובים. מאמר זה מציע אסטרטגיות להורים כיצד להתערב (ומתי לא), וללמד את הילדים לפתור בעיות בעצמם.',
                content: '<h4>הכלי הטיפולי: תיווך במקום שיפוט</h4><p>כשהילדים רבים, נסו להימנע מלקבוע מי "אשם". במקום זאת, שמשו כמתווכים. שבו איתם, הקשיבו לכל צד ללא הפרעה, ושקפו את הצרכים שלהם: "אז נועה, את רצית לבנות מגדל גבוה, ודני, אתה רצית את הקובייה האדומה בשביל המכונית שלך. איך נוכל לפתור את זה כך ששניכם תהיו מרוצים?". זה מלמד אותם מיומנויות משא ומתן חיוניות לחיים.</p>', 
                source: 'https://psycnet.apa.org/record/2010-10505-004',
                source_type: 'תקציר מחקר מ-Journal of Family Theory & Review'
            },
            'screen-time': { 
                title: 'ניהול זמן מסך בריא', 
                image: 'https://images.pexels.com/photos/442574/pexels-photo-442574.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'מסכים הם חלק מחיינו, והמטרה היא לא לאסור אלא לנהל. מאמר זה מספק קווים מנחים לקביעת גבולות ברורים ועקביים לגבי זמן מסך, תוך התמקדות באיכות התוכן ולא רק בכמות.',
                content: '<h4>הכלי הטיפולי: יצירת "אזורים ללא מסכים"</h4><p>הגדירו זמנים ומקומות בבית שבהם אין שימוש במסכים, ושהחוק יחול על כולם (גם על ההורים!). לדוגמה: אין מסכים בחדרי השינה, אין מסכים בזמן ארוחות משפחתיות, והשעה הראשונה והאחרונה של היום הן ללא מסך. זה יוצר מרחבים של תקשורת ורוגע. חשוב להסביר את ההיגיון מאחורי הכללים ולא רק להנחית אותם.</p>', 
                source: 'https://www.aacap.org/AACAP/Families_and_Youth/Facts_for_Families/FFF-Guide/Screen-Time-and-Children-100.aspx',
                source_type: 'פרסום של האקדמיה האמריקאית לפסיכיאטריה של הילד (AACAP)'
            },
             'self-esteem': { 
                title: 'חיזוק הדימוי העצמי', 
                image: 'https://images.pexels.com/photos/1556706/pexels-photo-1556706.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'דימוי עצמי בריא הוא המתנה הגדולה ביותר שאנו יכולים להעניק לילדינו. הוא אינו נבנה רק ממחמאות, אלא מתחושת מסוגלות, שייכות וחוסן. מאמר זה מסביר את ההבדל בין שבחים על מאמץ לשבחים על תוצאה.',
                content: '<h4>הכלי הטיפולי: שבח על תהליך ומאמץ</h4><p>במקום לומר "איזה ציור יפה!" (שבח על תוצאה), התמקדו בתהליך: "וואו, אני רואה שהשתמשת בהמון צבעים שונים ועבדת על זה הרבה זמן!". שבח כזה מלמד את הילד שהערך טמון במאמץ ובהתמדה, ולא רק בהצלחה, מה שמגביר את נכונותו להתמודד עם אתגרים. זה בונה חוסן נפשי אמיתי.</p>', 
                source: 'https://www.mindsetworks.com/science/',
                source_type: 'סקירת המחקר של ד"ר קרול דווק, אוניברסיטת סטנפורד'
            },
             'social-skills': { 
                title: 'פיתוח כישורים חברתיים', 
                image: 'https://images.pexels.com/photos/708440/pexels-photo-708440.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'היכולת ליצור ולשמר חברויות היא מיומנות נרכשת. ילדים זקוקים להדרכה כיצד ליזום שיחה, לשתף פעולה, לקרוא סיטואציות חברתיות ולהתמודד עם דחייה. המאמר מציע פעילויות לתרגול.',
                content: '<h4>הכלי הטיפולי: משחקי תפקידים</h4><p>תרגלו סיטואציות חברתיות בבית. למשל, שחקו "איך מצטרפים למשחק?". ילד אחד יכול להיות זה שמשחק, והשני מתרגל איך לגשת ולהגיד "היי, אפשר גם לשחק?". אפשר לתרגל גם איך להפסיד בכבוד במשחק קופסה או איך להציע פשרה כשיש חילוקי דעות. זה נותן לילד "תסריטים" מוכנים לשימוש בעולם האמיתי.</p>', 
                source: 'https://www.cdc.gov/ncbddd/childdevelopment/positiveparenting/middle2/index.html',
                source_type: 'מדריך התפתחותי של המרכז לבקרת מחלות (CDC)'
            },
             'sleep-issues': { 
                title: 'התמודדות עם קשיי שינה', 
                image: 'https://images.pexels.com/photos/3771045/pexels-photo-3771045.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'שינה איכותית חיונית להתפתחות הפיזית והרגשית של ילדים. קשיי הירדמות או יקיצות מרובות יכולים לנבוע מסיבות שונות. גלו כיצד לבנות "טקס שינה" מרגיע ועקבי ליצירת סביבת שינה המקדמת מנוחה.',
                content: '<h4>הכלי הטיפולי: טקס שינה עקבי</h4><p>המוח אוהב רוטינות. טקס שינה קבוע מאותת לגוף ולנפש שהגיע הזמן להירגע. הטקס צריך להיות באורך 20-30 דקות, ולהתקיים באותו סדר בכל ערב. לדוגמה: אמבטיה, פיג\'מה, צחצוח שיניים, שני סיפורים, חיבוק ונשיקה. הימנעו ממסכים לפחות שעה לפני השינה. העקביות היא המפתח להצלחה כאן.</p>', 
                source: 'https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4344564/',
                source_type: 'מחקר מ-PubMed (הספרייה הלאומית לרפואה של ארה"ב)'
            },
             'transitions': { 
                title: 'התמודדות עם שינויים ומעברים', 
                image: 'https://images.pexels.com/photos/1148820/pexels-photo-1148820.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'בין אם מדובר במעבר לגן חדש, הולדת אח או גירושין, שינויים יכולים לערער את תחושת הביטחון של ילדים. המפתח להתמודדות הוא הכנה מראש, שמירה על שגרה ככל האפשר, ומתן תוקף לכל הרגשות שעולים.',
                content: '<h4>הכלי הטיפולי: שימוש בספרים וסיפורים חברתיים</h4><p>השתמשו בספרים כדי להכין את הילד למעבר. קראו יחד סיפורים על ילדים שעוברים לגור בעיר אחרת או מתחילים גן חדש. אפשר גם ליצור "סיפור חברתי" אישי עם תמונות של הילד ושל המקום החדש, המתאר את סדר היום הצפוי. זה הופך את הלא-נודע למוכר וידידותי יותר. הכנה מוקדמת מפחיתה חרדה באופן משמעותי.</p>', 
                source: 'https://www.zerotothree.org/resource/helping-young-children-and-families-transition-to-a-new-normal/',
                source_type: 'פרסום מארגון Zero to Three (מומחים לגיל הרך)'
            },
             'mindfulness': { 
                title: 'מיינדפולנס וקשיבות לילדים', 
                image: 'https://images.pexels.com/photos/3621168/pexels-photo-3621168.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'בעולם מלא בגירויים, היכולת להיות נוכח ברגע הזה היא כלי רב עוצמה. מיינדפולנס לילדים אינו מדיטציה ארוכה, אלא תרגילים קצרים ומשחקיים המלמדים אותם לשים לב לנשימה, לתחושות הגוף ולקולות הסביבה.',
                content: '<h4>הכלי הטיפולי: "נשימת בלון"</h4><p>שבו או שכבו בנוחות. הניחו ידיים על הבטן. דמיינו שיש לכם בלון קטן בבטן. כשאתם שואפים אוויר דרך האף, הרגישו איך הבלון מתמלא והבטן עולה. כשאתם נושפים לאט דרך הפה, הרגישו איך האוויר יוצא מהבלון והבטן יורדת. חזרו על כך 5 פעמים. זהו תרגיל הרגעה מיידי ופשוט שאפשר לעשות בכל מקום.</p>', 
                source: 'https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6433235/',
                source_type: 'מטא-אנליזה מ-Journal of Child Psychology and Psychiatry'
            },
             'nutrition-mood': { 
                title: 'הקשר בין תזונה למצב הרוח', 
                image: 'https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'מה שהילדים שלנו אוכלים משפיע לא רק על הגוף, אלא גם על המוח ועל היכולת לווסת רגשות. מאמר זה סוקר את הקשר בין תזונה מאוזנת לבין יציבות רגשית וריכוז, ומציע טיפים פשוטים לשילוב מזונות מזינים.',
                content: '<h4>הכלי הטיפולי: שיתוף הילדים בבחירות</h4><p>במקום להכריח, הציעו בחירה מוגבלת. לדוגמה: "לארוחת ערב נאכל ירקות. אתם רוצים גזר או מלפפון?". שיתוף הילדים בתהליך הקניות והבישול יכול גם הוא להגביר את נכונותם לנסות מאכלים חדשים. המטרה היא להימנע ממאבקי כוח סביב האוכל ולהפוך את האכילה לחוויה חיובית. זה מעניק להם תחושת שליטה.</p>', 
                source: 'https://www.health.harvard.edu/blog/nutritional-strategies-to-ease-anxiety-201604139441',
                source_type: 'פרסום מבית הספר לרפואה של הרווארד (ד"ר אומה נאידו)'
            },
             'chores-responsibility': { 
                title: 'מטלות ופיתוח אחריות', 
                image: 'https://images.pexels.com/photos/4246120/pexels-photo-4246120.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1', 
                summary: 'מטלות בית אינן רק עזרה להורים, אלא דרך מהותית ללמד ילדים אחריות, תרומה למשפחה וכישורי חיים. המפתח הוא להתחיל מוקדם עם משימות פשוטות, ולהתמקד במאמץ ולא בביצוע המושלם.',
                content: '<h4>הכלי הטיפולי: "טבלת מטלות" ויזואלית</h4><p>עבור ילדים צעירים, צרו טבלה שבועית עם ציורים או מדבקות במקום מילים. כל משימה שהושלמה מזכה במדבקה. בסוף השבוע, אפשר לציין את ההצלחה בפעילות משפחתית מהנה (לאו דווקא פרס חומרי). זה הופך את המשימות למשחק ועוזר להם לעקוב אחר ההתקדמות שלהם באופן ויזואלי. זה גם מלמד דחיית סיפוקים.</p>', 
                source: 'https://www.extension.umn.edu/family/families-with-teens/article/why-teens-need-chores',
                source_type: 'מאמר מאוניברסיטת מינסוטה'
            }
        };

        const init = () => {
            const pageWrapper = document.getElementById('page-wrapper');
            const modals = {
                disclaimer: document.getElementById('disclaimer-modal'),
                tutorial: document.getElementById('tutorial-modal'),
                article: document.getElementById('article-modal'),
            };
            const agreeContainer = document.getElementById('agree-container');
            const agreeCheckbox = document.getElementById('agree-checkbox');
            const agreeButton = document.getElementById('agree-button');
            const showTutorialBtn = document.getElementById('show-tutorial-btn');
            const articlesGrid = document.getElementById('articles-grid');
            const showAllArticlesContainer = document.getElementById('show-all-articles-container');
            const showAllArticlesBtn = document.getElementById('show-all-articles-btn');
            const slides = document.querySelectorAll('.slider .slide');
            const accessibilityToggle = document.getElementById('accessibility-toggle');
            const accessibilityMenu = document.getElementById('accessibility-menu');

            const openModal = (modal) => { 
                if (modal) { // Check if modal exists before using it
                    modal.classList.add('active'); 
                    pageWrapper.classList.add('blurred'); 
                }
            };
            const closeModal = (modal) => {
                if (modal) { // Check if modal exists
                    modal.classList.remove('active');
                    if (!document.querySelector('.modal-overlay.active')) { 
                        pageWrapper.classList.remove('blurred'); 
                    }
                }
            };

            if (!localStorage.getItem('yonatan_disclaimer_agreed')) {
                openModal(modals.disclaimer);
            }
            
            agreeCheckbox.addEventListener('change', () => { 
                agreeButton.disabled = !agreeCheckbox.checked;
            });
            
            agreeButton.addEventListener('click', () => {
                if (!agreeCheckbox.checked) return;
                localStorage.setItem('yonatan_disclaimer_agreed', 'true');
                closeModal(modals.disclaimer);
                checkAndShowTutorial();
            });

            let currentStep = 0;
            const tutorialSteps = [
                { title: "ברוכים הבאים ליונתן!", content: "אני כאן כדי ללוות אתכם, צעד אחר צעד, במסע להורות רגועה ומודעת יותר.", button: "כן, בואו נתחיל!" },
                { title: "הצ'אט-בוט החכם 🧠", content: "בלחיצה על כפתור הבוט תוכלו להתחיל שיחה אישית. יונתן יציע כלים וטכניקות המותאמים לאתגרים שלכם.", button: "הבנתי, מה הלאה?" },
                { title: "מעקב והתקדמות 📊", content: "ב'אזור האישי' תוכלו לראות סיכומי שיחות, לעקוב אחר ההתקדמות, לשמור מאמרים ולהגדיר מטרות.", button: "מעולה, מה עוד?" },
                { title: "מאגר ידע ומאמרים 📚", content: "כל הכלים וההמלצות מגובים במחקר. כאן תמצאו מאמרים וסיכומים שיעזרו לכם להבין את השיטות.", button: "נהדר, אני מוכן!" }
            ];

            function showTutorialStep(stepIndex) {
                const step = tutorialSteps[stepIndex];
                const tutorialContent = modals.tutorial.querySelector('#tutorial-content');
                if (tutorialContent) {
                    tutorialContent.innerHTML = `
                        <button class="tutorial-close-btn absolute top-4 left-4 text-gray-400 hover:text-gray-700 text-2xl">&times;</button>
                        <h2 class="text-2xl font-bold text-center mb-4">${step.title}</h2>
                        <p class="text-center text-gray-600 mb-8">${step.content}</p>
                        <div class="flex items-center justify-center gap-2 mb-8">${tutorialSteps.map((_, i) => `<div class="w-3 h-3 rounded-full ${i === stepIndex ? 'bg-indigo-600' : 'bg-gray-300'}"></div>`).join('')}</div>
                        <div class="flex justify-center"><button class="tutorial-next-btn bg-indigo-600 text-white font-bold py-2 px-8 rounded-lg">${step.button}</button></div>`;
                    
                    tutorialContent.querySelector('.tutorial-next-btn').addEventListener('click', nextTutorialStep);
                    tutorialContent.querySelector('.tutorial-close-btn').addEventListener('click', closeTutorial);
                }
            }

            function nextTutorialStep() { 
                currentStep++; 
                (currentStep < tutorialSteps.length) ? showTutorialStep(currentStep) : closeTutorial(); 
            }
            
            function closeTutorial() { 
                closeModal(modals.tutorial); 
                localStorage.setItem('yonatan_tutorial_seen', 'true'); 
            }

            function checkAndShowTutorial() {
                if (!localStorage.getItem('yonatan_tutorial_seen')) {
                    setTimeout(() => { 
                        currentStep = 0; 
                        showTutorialStep(0); 
                        openModal(modals.tutorial); 
                    }, 300);
                }
            }
            
            showTutorialBtn.addEventListener('click', () => { 
                currentStep = 0; 
                showTutorialStep(0); 
                openModal(modals.tutorial); 
            });

            let currentSlideIdx = 0;
            if (slides.length > 0) {
                setInterval(() => {
                    if (document.hasFocus() && !document.body.classList.contains('reduced-motion')) {
                        slides[currentSlideIdx].classList.remove('active');
                        currentSlideIdx = (currentSlideIdx + 1) % slides.length;
                        slides[currentSlideIdx].classList.add('active');
                    }
                }, 5000);
            }

            function createArticleCard(key, article) {
                const card = document.createElement('div');
                card.className = 'article-card bg-white rounded-2xl shadow-md overflow-hidden cursor-pointer reveal';
                card.innerHTML = `
                    <div class="img-container overflow-hidden">
                        <img src="${article.image}" alt="${article.title}" class="w-full h-48 object-cover" loading="lazy">
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">${article.title}</h3>
                        <div class="article-summary text-gray-600 mb-4 text-sm leading-relaxed">
                            <p>${article.summary}</p>
                        </div>
                        <div class="flex justify-between items-center">
                            <button class="read-more-btn text-indigo-600 font-semibold hover:underline border border-indigo-200 px-4 py-1 rounded-full relative overflow-hidden">קרא עוד</button>
                        </div>
                    </div>`;
                
                card.querySelector('.read-more-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    openArticleModal(article);
                });
                
                return card;
            }

            function openArticleModal(article) {
                const articleWrapper = modals.article.querySelector('#article-content-wrapper');
                if (articleWrapper) {
                    articleWrapper.innerHTML = `
                        <div class="flex justify-between items-center border-b pb-4 mb-4">
                            <h2 class="text-3xl font-bold">${article.title}</h2>
                            <span class="close-article-btn text-4xl cursor-pointer text-gray-400 hover:text-gray-700">&times;</span>
                        </div>
                        <div class="prose max-w-none text-right">${article.content}</div>
                        <div class="mt-8 pt-4 border-t space-y-4">
                            <div class="text-sm">
                                <p class="font-semibold text-gray-700 mb-2">מקור: <span class="font-normal text-gray-600">${article.source_type}</span></p>
                                <div class="flex items-center gap-2">
                                    <input type="text" readonly value="${article.source}" class="link-input w-full p-2 border rounded-md bg-gray-100 text-gray-600 text-xs" dir="ltr">
                                    <button class="copy-link-btn bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 flex items-center gap-2 shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="w-4 h-4">
                                            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zM-1 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5z"/>
                                        </svg>
                                        <span class="copy-text">העתק קישור</span>
                                    </button>
                                </div>
                            </div>
                            <div class="flex justify-end gap-3">
                                <button class="print-btn bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                                    </svg>
                                    הדפסה
                                </button>
                                <button class="save-pdf-btn bg-indigo-100 text-indigo-700 font-semibold py-2 px-4 rounded-lg hover:bg-indigo-200 flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                    </svg>
                                    שמירה
                                </button>
                            </div>
                        </div>`;

                    articleWrapper.querySelector('.close-article-btn').addEventListener('click', () => closeModal(modals.article));
                    
                    articleWrapper.querySelector('.copy-link-btn').addEventListener('click', (e) => {
                        const button = e.currentTarget;
                        const linkInput = articleWrapper.querySelector('.link-input');
                        const copyTextSpan = button.querySelector('.copy-text');
                        
                        linkInput.select();
                        linkInput.setSelectionRange(0, 99999); 

                        try {
                            document.execCommand('copy');
                            copyTextSpan.textContent = 'הועתק!';
                            button.classList.add('bg-green-200');

                            setTimeout(() => {
                                copyTextSpan.textContent = 'העתק קישור';
                                button.classList.remove('bg-green-200');
                            }, 2000);
                        } catch (err) {
                            console.error('Fallback: Oops, unable to copy', err);
                            copyTextSpan.textContent = 'שגיאה';
                        }
                    });

                    articleWrapper.querySelector('.print-btn').addEventListener('click', () => window.print());
                    
                    const saveBtn = articleWrapper.querySelector('.save-pdf-btn');
                    saveBtn.addEventListener('click', () => {
                        const originalText = saveBtn.innerHTML;
                        saveBtn.innerHTML = 'מעבד...';
                        saveBtn.disabled = true;

                        const { jsPDF } = window.jspdf;
                        const contentToSave = articleWrapper.querySelector('.prose');
                        
                        html2canvas(contentToSave, { scale: 2, useCORS: true }).then(canvas => {
                            const imgData = canvas.toDataURL('image/png');
                            const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                            const pdfWidth = pdf.internal.pageSize.getWidth();
                            const canvasWidth = canvas.width;
                            const canvasHeight = canvas.height;
                            const ratio = canvasWidth / canvasHeight;
                            const imgHeight = (pdfWidth - 20) / ratio;

                            pdf.addImage(imgData, 'PNG', 10, 10, pdfWidth - 20, imgHeight);
                            pdf.save(`${article.title}.pdf`);

                            saveBtn.innerHTML = originalText;
                            saveBtn.disabled = false;
                        }).catch(err => {
                            console.error("Error generating PDF:", err);
                            saveBtn.innerHTML = originalText;
                            saveBtn.disabled = false;
                        });
                    });

                    openModal(modals.article);
                }
            }

            modals.article.addEventListener('click', (e) => { if (e.target === modals.article) closeModal(modals.article); });
            
            const articleKeys = Object.keys(articlesData);
            
            function renderArticles(count) {
                articlesGrid.innerHTML = '';
                articleKeys.slice(0, count).forEach(key => {
                    articlesGrid.appendChild(createArticleCard(key, articlesData[key]));
                });
                observeElements();
            }

            showAllArticlesBtn.addEventListener('click', () => {
                renderArticles(articleKeys.length);
                showAllArticlesContainer.style.display = 'none';
            });

            let observer;
            function observeElements() {
                const reveals = document.querySelectorAll('.reveal:not(.visible)');
                const options = { root: null, rootMargin: '0px', threshold: 0.1 };
                if (observer) observer.disconnect();
                observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, options);
                reveals.forEach(el => observer.observe(el));
            }

            function setupWalkingCharacter() {
                const container = document.getElementById('character-animation');
                if (!container) return;
                try {
                    lottie.loadAnimation({
                        container: container,
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        path: 'character-animation.json' 
                    });
                } catch(e) { console.error("Could not load Lottie animation", e); }
            }

            const FONT_STEP = 0.1;
            const applyFontSize = (size) => {
                document.documentElement.style.setProperty('--font-size', `${size}rem`);
            };

            accessibilityToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                accessibilityMenu.classList.toggle('active');
            });
            document.addEventListener('click', () => accessibilityMenu.classList.remove('active'));
            accessibilityMenu.addEventListener('click', e => e.stopPropagation());

            document.getElementById('increase-font').addEventListener('click', () => {
                let currentSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size'));
                applyFontSize(currentSize + FONT_STEP);
            });

            document.getElementById('decrease-font').addEventListener('click', () => {
                let currentSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size'));
                applyFontSize(Math.max(0.8, currentSize - FONT_STEP));
            });

            document.getElementById('toggle-contrast').addEventListener('click', () => {
                document.body.classList.toggle('accessibility-contrast');
            });

            document.getElementById('toggle-links').addEventListener('click', () => {
                document.body.classList.toggle('accessibility-highlight-links');
            });
            
            document.getElementById('toggle-motion').addEventListener('click', () => {
                document.body.classList.toggle('reduced-motion');
            });

            renderArticles(6);
            observeElements();
            setupWalkingCharacter();
        };

        init();
    });
    </script>
</body>
</html>
```
I made some changes. I've restored the missing HTML code for the modals, which was causing the script to fail when trying to find them. I've also added checks to ensure the script doesn't try to manipulate elements that don't exist, making the code more robu